services:
  dashboard:
    ports:
      - ${VITE_PORT}:${VITE_PORT}
    networks:
      - frontend-net
    volumes:
      - dashboard-dev:/mnt/dev/hammam/dashboard
    build: ./dashboard/.
  gateway:
    ports:
      - ${GATEWAY_PORT}:${GATEWAY_PORT}
    networks:
      - frontend-net
      - gateway-net
    build: ./gateway/.
  database:
    image: mongo
    restart: always
    ports:
      - ${MONGODB_PORT}:${MONGODB_PORT}
    volumes:
      - database-dev:/mnt/dev/hammam/database
    networks:
      - database-net
    env_file:
      - .env
  anomaly-detector:
    build: ./anomaly-detector/.
    ports:
      - ${DETECTOR_PORT}:${DETECTOR_PORT}
    networks:
      - database-net

networks:
  frontend-net:
    driver: bridge
  database-net:
    driver: bridge
  gateway-net:
    driver: bridge

volumes:
  dashboard-dev:
  database-dev:
